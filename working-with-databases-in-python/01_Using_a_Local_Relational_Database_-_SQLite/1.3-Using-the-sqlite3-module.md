# Connecting to the database

```python
# Import the sqlite3 module to interact with SQLite databases
import sqlite3 

# Connect to a SQLite database file (or create it if it doesn't exist)
database = sqlite3.connect("portfolio.db")

# Create a cursor object which allows execution of SQL commands
cursor = database.cursor()

# Define a SQL query string to create a table named 'investments'
# The table includes:
# - coin_id (text): identifier for a cryptocurrency
# - currency (text): currency used (e.g., USD, EUR)
# - sell (integer): indicator for whether the investment was sold (e.g., 0 or 1). SQLite does not have bool type
# - amount (real): amount of currency or asset
# - date (timestamp): date and time of the investment
create_table_query = """
CREATE TABLE investments (
    coin_id TEXT,
    currency TEXT,
    sell INT,
    amount REAL,
    date TIMESTAMP
);
"""

# Execute the SQL command to create the table
cursor.execute(create_table_query)
```

# Interacting with the database

- We can insert a row into the table with a SQL query.


```python
import datetime

# We can represent the Python values in the row using a tuple
investment = ("bitcoin", "usd, True, 1.0, datetime.datetime.now())

# We insert the row into the table using parametrized SQL query with ? as placeholder for the values
cursor.execute(
	"INSERT INTO investments VALUES (?, ?, ?, ?, ?);",
	investment
)

# We need to call commit to actually save the data
database.commit()

# To retrieve the row from the table we can run a SQL SELECT query with the execute method and save the result
result = cursor.execute("SELECT * FROM investments;")

# Call fecthall to get the data
all_rows = result.fetchall()

# Get a single row with fetchone. None if no results.
first_or_only_row = result.fetchone()
```

