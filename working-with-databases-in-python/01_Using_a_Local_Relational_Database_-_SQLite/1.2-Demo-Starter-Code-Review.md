# Getting prices with coingecko API

```bash
curl -s 'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd'

{"bitcoin":{"usd":105537}}
```

# Getting prices from Python

[[get_price.py]]

```python
import requests

coin_id = "bitcoin"
currency = "usd"

url = f"https://api.coingecko.com/api/v3/simple/price?ids={coin_id}&vs_currencies={currency}"

data = requests.get(url).json()

coin_price = data[coin_id][currency]

print(coin_price)
```

```bash
❯ python get_price.py
105699
```

# Creating a CLI tool for get prices

```python
import requests
import click

# The @click.command decorator transforms this function into a Click CLI command.
# It handles parsing arguments, generating help text, and wiring up the call to this function.
@click.command()
# Each @click.option decorator adds an option flag to the CLI.
# - "--coin_id": the command-line flag used by the user
# - default="bitcoin": the default value if the user omits the flag
# - help="…": text shown in `--help` explaining the option
@click.option(
	"--coin_id", default="bitcoin", help="The ID of the coin to get the price for."
)
@click.option("--currency", default="usd", help="The currency to get the price in.")

def get_coin_price(coin_id, currency):
	url = (
		f"https://api.coingecko.com/api/v3/simple/price"
		f"?ids={coin_id}&vs_currencies={currency}"
	)
	data = requests.get(url).json()
	coin_price = data[coin_id][currency]
	print(f"The current price of {coin_id} is {coin_price:.2f} {currency.upper()}")
	return coin_price

if __name__ == "__main__":
	get_coin_price()
```

```bash
❯ python main.py
The current price of bitcoin is 105563.00 USD
❯ python main.py --coin_id="ethereum" --currency="eur"
The current price of ethereum is 2207.09 EUR
```

