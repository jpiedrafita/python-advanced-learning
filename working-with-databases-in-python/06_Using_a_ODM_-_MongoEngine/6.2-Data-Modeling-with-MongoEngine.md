

- The ```Document``` class is the base class for all document model classes.
	- MongoEngine has a similar concept of the ```Base``` class inheriting from ```DeclarativeBase```.
	- We can subclass it directly or create inheritance hierarchies.
	- By default this will create a collection in the database with the lowercase normalized name of the class.

```python
from mongoengine import Document

class Investment(Document):
```

- There are different field types that model columns.

> [!WARNING] it is a bad practice to ```import *``` despite the import is too long. Use the ```fields``` submodule.

```python
from mongoengine import Document. StringField, FloatField, DateTimeField, BooleanField

from mongoenfine import Document, fields

# We can use min/max values, defaults...
class Investment(Document):
	coin = fields.StringField(max_length=32)
	currency = fields.StringField(max_length=3)
	amount = fields.FloatField(min_value=0.00001)
	timestamp = fields.DateTimeField(default=datetime.datetime.now)
	sell = fields.BooleanField(default=False)
```

- Use the initializer to create to create a new document with fields as keyword arguments.

```python
bitcoin = Investment(coin="bitcoin", currency="USD", amount=1.0)
bitcoin.save()
```

- Use the objects attribute of the document model to retrieve documents from the database.
- To query the documents, call the ```filter``` method on the objects using keyword arguments for the fields.

```python
for investment in Investment.objects:
	print(investment.coin)

gbp_investments = Investment.objects.filter(currency="GBP")
```

- There are a number of operators with double underscore that are appended to the field name.
	- Calls can be chained
	- E.g. get objects with amount < 1.0

```python
small_investments = Investment.objects.filter(amound__lt=1.0)

small_gbp_investments = Investment.objects.filter(currency="GBP").filter(amound__lt=1.0)
```

- Update a particular document with ```update``` method and keyword arguments.
	- This will persist the change in the database.

```python
gbp_investment.update(amount=1.5) # no need to call save()
```

- The ```delete``` method will delete the document persistently.

```python
gbp_investment.delete()
```