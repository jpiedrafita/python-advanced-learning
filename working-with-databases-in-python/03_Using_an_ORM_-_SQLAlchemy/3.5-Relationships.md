
- We can relate two tables using a common key and telling SQLAlchemy that it is a ```ForeignKey```
	- ```mapped_column(ForeignKey("portfolio.id))```
- The ```ForeignKey``` needs to know the column related in the table that it is being referenced
	- Use the normalized lowercase ```"portfolio.id```.

```python
class Portfolio(Base)
	__tablename__ = "portfolio"
	id: Mapped[int] = mapped_column(primary_key=True)
	name: Mapped[str] = mapped_column(String(256))
	description: Mapped[str] = mapped_column(Text())

class Investment(Base):
	lename__ = "investments" 
	id: Mapped[int] = mapped_column(primary_key=True)
	coin: Mapped[str] = mapped_column(String(32))
	currency: Mapped[str] = mapped_column(String(3))
	amount: Mapped[float] = mapped_column(Numeric(5, 2)) I
	portfolio_id: Mapped[int] = mapped_column(ForeignKey("portfolio.id))
```

- Instead of referring the other class by id we can have the row itself.
- It cannot be initialized with ```mapped_column``` because there won't be a column in the other table.
- The relationship can be established in both classes/tables
	- Note the type ```List``` of ```"Investment"``` as it is a one to many relationship.
- Sync both relationships with ```back_populates```

```python
class Portfolio(Base)
	...
	investments: Mapped[List["Investment"]] = relationship(back_populates("portfolio"))

class Investment(Base):
	...
	portfolio: Mapped["Portfolio"] = relationship(back_populates("investment"))
	
```

- Adding elements form one type to the other

```python
portfolio = Portfolio(name="My Portfolio", description="My Description")

bitcoin = Investment(coin="bitcoin", currency="USD", amount=1.0)
ethereum = Investment(coin="ethereum", currency="GBP", amount=10.0)
dogecoin = Investment(coin="dogecoin", currency="EUR", amount=100.0)

bitcoin.portfolio = portfolio

portfolio.investments.extend([ethereum], [dogecoin])
```

- Only adding one instance to the session (portfolio) is enough, as the related rows will be loaded in the other table.

```python
with Session(engine) as session:
	session.add(portfolio)
	session.commit()
```
